# 材料マッチングの仕組み

アプリは、レシピを見ているときにどの材料が手元にあるかを確認できるようにします。仕組みは以下の通りです。

## エイリアスについて

**エイリアス** は、レシピの材料とパントリーアイテムをマッチングするための別名です。材料とパントリーアイテムの両方に複数のエイリアスを持たせることができます。

レシピの材料のエイリアスとパントリーアイテムのエイリアスが一致すると **マッチ** が発生します。例：
- レシピの材料「マヨネーズ」のエイリアス：*マヨネーズ、マヨ*
- パントリーアイテム「キューピーマヨ」のエイリアス：*マヨ、マヨネーズ、キューピー*
- 「マヨ」が両方にあるため **マッチ成立**

**エイリアスの作成方法：**
- **自動：** アイテムを追加すると、アプリが一般的なバリエーションを生成します（インターネット接続が必要）
- **手動：** いつでも独自のエイリアスを追加できます

**エイリアスの管理場所：**

*レシピの材料の場合：*
1. レシピを開いて材料を表示
2. 材料の横にある色付きのステータスチップをタップ
3. 材料をタップして詳細ページを表示
4. **エイリアス** セクションでエイリアスを表示・編集

*パントリーアイテムの場合：*
1. パントリーに移動してアイテムをタップして編集
2. **エイリアス** セクションでエイリアスを表示・編集

## レシピページでの表示

各材料には、在庫状況を示す **色付きチップ** が表示されます：

- **緑「在庫あり」：** パントリーにあるか、別のレシピから作れます
- **オレンジ「残りわずか」：** あるが、残り少なくなっています
- **赤「切れ」：** パントリーにあるが、在庫切れとしてマークされています
- **チップなし：** この材料はパントリーにありません

チップをタップすると、ステータスごとにグループ化された全材料の概要が表示されます。そこから個々の材料をタップしてエイリアスを管理できます。

## 「在庫あり」の判定

材料があるかどうかを判定する際：
- **在庫あり** のパントリーアイテムはカウントされます
- **残りわずか** のパントリーアイテムもカウントされます（ただし補充のリマインダー付き）
- **在庫切れ** のパントリーアイテムはカウントされません
- パントリーにないアイテムはカウントされません

## サブレシピマッチング

レシピの材料が別のレシピを参照している場合（「手作りパイ生地」など）、アプリはそのサブレシピが作れるかどうかを確認します。すべての材料が揃っていれば、直接のパントリーマッチがなくても「在庫あり」と表示されます。

## より良いマッチングのためのヒント

- パントリーアイテムには一般的な名前を使用（「2%オーガニック牛乳」ではなく「牛乳」）
- よく使う名前をパントリーアイテムにエイリアスとして追加
- エイリアスは大文字小文字を区別しません（「牛乳」と「Milk」はマッチ）
- マッチングがうまくいかない場合は、材料とパントリーアイテムの両方に重複するエイリアスがあるか確認してください
